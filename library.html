<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Good Food ‚Äì Library</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div>‚ò∞</div>
    <div class="center-title">GOOD FOOD</div>
    <div>üîç</div>
  </header>

  <nav>
    <div class="issue">
      <span>Issue</span>
      <div class="issue-menu">
        <a href="#">January 2025</a>
        <a href="#">February 2025</a>
        <a href="#">March 2025</a>
        <a href="#">April 2025</a>
        <a href="#">May 2025</a>
        <a href="#">June 2025</a>
        <a href="#">July 2025</a>
        <a href="#">August 2025</a>
        <a href="#">September 2025</a>
        <a href="#">October 2025</a>
        <a href="#">November 2025</a>
        <a href="#">December 2025</a>
      </div>
    </div>

    <a href="library.html">Library</a>
    <a href="subscribe.html">Subscribe</a>
    <a href="more.html">More...</a>
  </nav>

  <main>
    <div class="hero-container">
      <img src="/public/library-2048x849.webp" alt="Library Hero Image" class="hero-image">
    </div>
    <div class="filter-bar">
      <div class="filter-item" data-filter="issues">Issues</div>
      <div class="filter-item" data-filter="my">My issues</div>
      <div class="filter-item" data-filter="specials">Specials</div>
      <div class="filter-item" data-filter="audio">Audio</div>
    </div>
    <div class="grid-container" id="library-grid">

    </div>
  </main>

  <footer>
    <a href="impressum.html">Impressum / Legal</a>
    <div>¬© 2026 Good Food Magazine</div>
    <a href="gdpr.html" class="gdpr-button">Data & Privacy Settings</a>
  </footer>

<script>
  const grid = document.getElementById('library-grid');
  const filterItems = document.querySelectorAll('.filter-item');

  let allItems = [];

  fetch('library.json')
    .then(response => response.json())
    .then(data => {
      allItems = data;
      renderItems(allItems); // Show all by default
    });

  function renderItems(items) {
    grid.innerHTML = ''; // Clear grid
    items.forEach(item => {
      const cell = document.createElement('div');
      cell.className = 'cell';
      
      if(item.audio) {
        cell.innerHTML = `
          <img src="${item.image}" alt="${item.title}">
          <div class="title">${item.title}, ${item.runtime}</div>
          <div class="buttons">
            <button>Listen now</button>
            <button>&#x2601; ‚Üì</button>
          </div>
        `;
      } else {
        cell.innerHTML = `
          <img src="${item.image}" alt="${item.title}">
          <div class="title">${item.title}</div>
        `;
      }

      grid.appendChild(cell);
    });
  }

  filterItems.forEach(filter => {
    filter.addEventListener('click', () => {
      // Remove active class from all
      filterItems.forEach(f => f.classList.remove('active'));
      // Add active class to clicked
      filter.classList.add('active');

      const type = filter.dataset.filter;
      let filtered = [];

      switch(type) {
        case 'issues':
          filtered = allItems.filter(item => !item.audio);
          break;
        case 'my':
          filtered = allItems.filter(item => item.my);
          break;
        case 'specials':
          filtered = allItems.filter(item => item.special);
          break;
        case 'audio':
          filtered = allItems.filter(item => item.audio);
          break;
        default:
          filtered = allItems;
      }

      renderItems(filtered);
    });
  });
</script>
</body>
</html>
